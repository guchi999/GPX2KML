　そこでGPSログを国土地理院の地図に表示するために、GPXファイルをKMLファイルに変換するツールです。地理院地図にGPSログの軌跡を表示すると、画像やHTMLファイルとして地図が切り出せ、それらをブログやインスタ等で使う事ができます。登山地図にも使えます。
  
　GPS機器のログだけでなく、各種ソフトで作ったGPXファイルも変換できます。ウエイポイントが入っているGPXファイルは、ポイントをマーカーとして出力し地理院地図に表示できます。ヤマレコの「ヤマプラ」や「らくル～ト」で作った地名入りGPXファイルの地名もマーカーとして出力できます。
 
　ChromeやFirefox等のブラウザで動き、特別なソフトをインストールする必要はありません。

　GPXファイルからKMLファイルへの変換はGoogleマップやカシミール3Dでも出来ますが、カシミール3DのKMLファイルは地理院の要求仕様とは少し違っており、ラインの色や太さが変えられなかったり、マーカー表示/非表示は設定できません。
　Googleマップではラインやマーカーの設定もできますがログインしてマイマップを開く必要があり、不要になったマイマップを削除するにはGoogleドライブを開かなくてはいけない等、少し手間が面倒です。また、GPXファイルによっては読み込んでくれないこともありました。

　このツールはkmlファイルの書式を地理院の要求仕様に合わせてあり、ラインの色、太さ、マーカーの表示指定ができ、変換も早く手軽です。
　元ファイルは読み取るだけで、何の変更もしません。

　Google Chrome、Firefox、Microsoft Edge で動作を確認してます。Android の Chrome でも使えます。Opera や safari でも動くと思われます。


１．使い方

　GPX2KML.htmを開き、変換するGPXファイルを画面にドロップするか、エリア内のボンタンで選択して開き、ラインとマーカーの指定をラジオボタンで選択、「変換したKMLファイルを保存」をクリックするだけです。
　1秒や5秒間隔のログのように大きなファイルサイズは読み込みに多少時間がかかる事があります。

　変換後のファイルは、ブラウザでダウンロードを指定しているフォルダ（通常は［ダウンロード］フォルダ）に xxxxxx.kml の名前で保存されます。(xxxxxxは入力ファイル名）

　トラック端マーカーは「始点と終点のみ表示」では、同じトラック名ならそのトラックの始点と終点に、異なるトラック名があれば、その始点と終点にもそれぞれマーカーが表示されます。「全て表示する」では、GPXファイにトラックが複数あり、トラック名が同じ場合は最初から最後の1つ前のトラックは始点のみ、最後のトラックは終点のみが表示されます。

　ウエイポイントをマーカーとして表示する／しないの選択もできます。

　ファイルは連続で変換できます。入力/出力ファイル表示に前の物が残っていても、次のファイルを開けば変更されます。
　同じGPXファイルでライン/マーカーの指定を変えたファイルを作ることもできます。その時に同じ名前のファイルがダウンロードフォルダに残っていれば、ファイル名はxxxxxx(1).kmlと連番になりますので設定を変えたKLMファイルを連続して作れます。


２．地理院地図への表示

　地理院地図( http://maps.gsi.go.jp/index_m.html )にKMLファイルを表示させるのは、地図にファイルをドロップするだけです。地図スケールが変更され、ルート全体が表示されます。ファイルサイズが大きいと表示されるまでに多少時間がかかる事があります。

　地図のメニューバーに「共有」や「ツール」の表示がないときはモバイル版になっているので、ヘルプの隣の三本線アイコンをクリックし、「設定」の「PC版で表示」を選んでください。

　表示したルートを削除するのは、メニューバーの「ツール」をクリックして出てくるサイドバーの「作図・ファイル」をクリックし、入力したKLMファイルを削除します。

　ブログやインスタに使う画像やHTMLファイルをダウンロードするには、メニューバーの「共有」をクリックしたメニューでツイッター右隣の山のアイコンが画像、QRコードの右隣りがHTMLです。
　右端はブログパーツとして使うiframeタグが発行されますがそれを埋め込んでもログの軌跡は表示されません。HTMLをダウンロードしてリンクとして埋め込めば軌跡が表示されます。
　その他にも色々な機能がありますが、詳細は地理院地図のヘルプを参照してください。


